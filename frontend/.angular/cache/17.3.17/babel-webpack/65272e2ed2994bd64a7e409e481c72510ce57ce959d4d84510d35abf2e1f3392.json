{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../../core/services/ai.service\";\nimport * as i3 from \"../../../../core/services/auth.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"chatContainer\"];\nfunction ChatComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 24);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 25);\n    i0.ɵɵelement(3, \"path\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"h3\", 27);\n    i0.ɵɵtext(5, \"Welcome to CareerCompass AI!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 28);\n    i0.ɵɵtext(7, \"Ask me anything about your career, skills development, or professional growth.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatComponent_div_17_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelement(1, \"div\", 34);\n    i0.ɵɵelementStart(2, \"span\", 35);\n    i0.ɵɵtext(3, \"AI is thinking...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ChatComponent_div_17_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵelement(1, \"div\", 36);\n    i0.ɵɵelementStart(2, \"div\", 37);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const message_r2 = i0.ɵɵnextContext().$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"innerHTML\", ctx_r2.formatMessage(message_r2.content), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(4, 2, message_r2.timestamp, \"h:mm a\"), \" \");\n  }\n}\nfunction ChatComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"div\", 29)(2, \"div\", 30);\n    i0.ɵɵtemplate(3, ChatComponent_div_17_div_3_Template, 4, 0, \"div\", 31)(4, ChatComponent_div_17_div_4_Template, 5, 5, \"div\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const message_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", message_r2.isUser ? \"flex justify-end\" : \"flex justify-start\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngClass\", message_r2.isUser ? \"bg-primary-600 text-white\" : \"bg-white border border-secondary-200\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", message_r2.isLoading);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !message_r2.isLoading);\n  }\n}\nfunction ChatComponent_span_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 38);\n  }\n}\nexport let ChatComponent = /*#__PURE__*/(() => {\n  class ChatComponent {\n    constructor(fb, aiService, authService, router) {\n      this.fb = fb;\n      this.aiService = aiService;\n      this.authService = authService;\n      this.router = router;\n      this.messages = [];\n      this.isLoading = false;\n      this.chatForm = this.fb.group({\n        message: ['', [Validators.required, Validators.minLength(1)]]\n      });\n    }\n    ngOnInit() {\n      // Add welcome message\n      this.addMessage('Hello! I\\'m your AI career assistant. I can help you with career guidance, skill development, job search tips, and professional growth strategies. What would you like to know?', false);\n    }\n    ngAfterViewChecked() {\n      this.scrollToBottom();\n    }\n    sendMessage() {\n      if (this.chatForm.valid && !this.isLoading) {\n        const messageText = this.chatForm.get('message')?.value.trim();\n        if (messageText) {\n          // Add user message\n          this.addMessage(messageText, true);\n          // Clear input\n          this.chatForm.patchValue({\n            message: ''\n          });\n          // Add loading message for AI response\n          const loadingMessage = this.addMessage('', false, true);\n          // Send to AI service\n          this.isLoading = true;\n          this.aiService.chatWithAI({\n            message: messageText\n          }).subscribe({\n            next: response => {\n              this.isLoading = false;\n              this.removeMessage(loadingMessage.id);\n              this.addMessage(response.response, false);\n            },\n            error: error => {\n              this.isLoading = false;\n              this.removeMessage(loadingMessage.id);\n              this.addMessage('Sorry, I encountered an error. Please try again.', false);\n              console.error('Chat error:', error);\n            }\n          });\n        }\n      }\n    }\n    addMessage(content, isUser, isLoading = false) {\n      const message = {\n        id: Date.now().toString(),\n        content,\n        isUser,\n        timestamp: new Date(),\n        isLoading\n      };\n      this.messages.push(message);\n      return message;\n    }\n    removeMessage(messageId) {\n      this.messages = this.messages.filter(m => m.id !== messageId);\n    }\n    scrollToBottom() {\n      if (this.chatContainer) {\n        this.chatContainer.nativeElement.scrollTop = this.chatContainer.nativeElement.scrollHeight;\n      }\n    }\n    formatMessage(content) {\n      // Simple formatting for line breaks and basic markdown\n      return content.replace(/\\n/g, '<br>').replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.*?)\\*/g, '<em>$1</em>');\n    }\n    goBack() {\n      this.router.navigate(['/dashboard']);\n    }\n    static {\n      this.ɵfac = function ChatComponent_Factory(t) {\n        return new (t || ChatComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AiService), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ChatComponent,\n        selectors: [[\"app-chat\"]],\n        viewQuery: function ChatComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.chatContainer = _t.first);\n          }\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 26,\n        vars: 5,\n        consts: [[\"chatContainer\", \"\"], [1, \"min-h-screen\", \"bg-secondary-50\"], [1, \"bg-white\", \"shadow-sm\", \"border-b\", \"border-secondary-200\"], [1, \"max-w-7xl\", \"mx-auto\", \"px-4\", \"sm:px-6\", \"lg:px-8\"], [1, \"flex\", \"justify-between\", \"h-16\"], [1, \"flex\", \"items-center\"], [1, \"mr-4\", \"text-secondary-500\", \"hover:text-secondary-700\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-6\", \"h-6\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 19l-7-7 7-7\"], [1, \"text-xl\", \"font-bold\", \"text-primary-600\"], [1, \"text-sm\", \"text-secondary-600\"], [1, \"max-w-4xl\", \"mx-auto\", \"h-[calc(100vh-64px)]\", \"flex\", \"flex-col\"], [1, \"flex-1\", \"overflow-y-auto\", \"p-6\"], [\"class\", \"text-center text-secondary-500 mt-20\", 4, \"ngIf\"], [\"class\", \"mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"border-t\", \"border-secondary-200\", \"bg-white\", \"p-4\"], [1, \"flex\", \"space-x-4\", 3, \"ngSubmit\", \"formGroup\"], [1, \"flex-1\"], [\"type\", \"text\", \"formControlName\", \"message\", \"placeholder\", \"Ask about career advice, skills, or professional development...\", 1, \"w-full\", \"px-4\", \"py-2\", \"border\", \"border-secondary-300\", \"rounded-lg\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-primary-500\", \"focus:border-transparent\", 3, \"keydown.enter\"], [\"type\", \"submit\", 1, \"px-6\", \"py-2\", \"bg-primary-600\", \"text-white\", \"rounded-lg\", \"hover:bg-primary-700\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-primary-500\", \"disabled:opacity-50\", \"disabled:cursor-not-allowed\", \"flex\", \"items-center\", 3, \"disabled\"], [\"class\", \"spinner mr-2\", 4, \"ngIf\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-5\", \"h-5\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"], [1, \"text-center\", \"text-secondary-500\", \"mt-20\"], [1, \"mb-4\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"w-16\", \"h-16\", \"mx-auto\", \"text-primary-200\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"], [1, \"text-lg\", \"font-medium\", \"text-secondary-900\", \"mb-2\"], [1, \"text-secondary-600\"], [3, \"ngClass\"], [1, \"max-w-xs\", \"lg:max-w-md\", \"px-4\", \"py-2\", \"rounded-lg\", \"shadow-sm\", 3, \"ngClass\"], [\"class\", \"flex items-center space-x-2\", 4, \"ngIf\"], [\"class\", \"text-sm\", 4, \"ngIf\"], [1, \"flex\", \"items-center\", \"space-x-2\"], [1, \"spinner\", \"w-4\", \"h-4\"], [1, \"text-sm\"], [3, \"innerHTML\"], [1, \"text-xs\", \"opacity-75\", \"mt-1\"], [1, \"spinner\", \"mr-2\"]],\n        template: function ChatComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"nav\", 2)(2, \"div\", 3)(3, \"div\", 4)(4, \"div\", 5)(5, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_5_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.goBack());\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(6, \"svg\", 7);\n            i0.ɵɵelement(7, \"path\", 8);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(8, \"h1\", 9);\n            i0.ɵɵtext(9, \"CareerCompass AI Chat\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"div\", 5)(11, \"span\", 10);\n            i0.ɵɵtext(12, \"AI Career Assistant\");\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(13, \"div\", 11)(14, \"div\", 12, 0);\n            i0.ɵɵtemplate(16, ChatComponent_div_16_Template, 8, 0, \"div\", 13)(17, ChatComponent_div_17_Template, 5, 4, \"div\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"div\", 15)(19, \"form\", 16);\n            i0.ɵɵlistener(\"ngSubmit\", function ChatComponent_Template_form_ngSubmit_19_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.sendMessage());\n            });\n            i0.ɵɵelementStart(20, \"div\", 17)(21, \"input\", 18);\n            i0.ɵɵlistener(\"keydown.enter\", function ChatComponent_Template_input_keydown_enter_21_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.sendMessage());\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(22, \"button\", 19);\n            i0.ɵɵtemplate(23, ChatComponent_span_23_Template, 1, 0, \"span\", 20);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(24, \"svg\", 21);\n            i0.ɵɵelement(25, \"path\", 22);\n            i0.ɵɵelementEnd()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(16);\n            i0.ɵɵproperty(\"ngIf\", ctx.messages.length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.chatForm);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"disabled\", ctx.chatForm.invalid || ctx.isLoading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          }\n        },\n        dependencies: [CommonModule, i5.NgClass, i5.NgForOf, i5.NgIf, i5.DatePipe, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        encapsulation: 2\n      });\n    }\n  }\n  return ChatComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}