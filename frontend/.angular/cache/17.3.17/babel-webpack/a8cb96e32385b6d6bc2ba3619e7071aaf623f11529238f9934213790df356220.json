{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nlet ChatComponent = class ChatComponent {\n  constructor(fb, aiService, authService, router) {\n    this.fb = fb;\n    this.aiService = aiService;\n    this.authService = authService;\n    this.router = router;\n    this.messages = [];\n    this.isLoading = false;\n    this.chatForm = this.fb.group({\n      message: ['', [Validators.required, Validators.minLength(1)]]\n    });\n  }\n  ngOnInit() {\n    // Add welcome message\n    this.addMessage('Hello! I\\'m your AI career assistant. I can help you with career guidance, skill development, job search tips, and professional growth strategies. What would you like to know?', false);\n  }\n  ngAfterViewChecked() {\n    this.scrollToBottom();\n  }\n  sendMessage() {\n    if (this.chatForm.valid && !this.isLoading) {\n      const messageText = this.chatForm.get('message')?.value.trim();\n      if (messageText) {\n        // Add user message\n        this.addMessage(messageText, true);\n        // Clear input\n        this.chatForm.patchValue({\n          message: ''\n        });\n        // Add loading message for AI response\n        const loadingMessage = this.addMessage('', false, true);\n        // Send to AI service\n        this.isLoading = true;\n        this.aiService.chatWithAI({\n          message: messageText\n        }).subscribe({\n          next: response => {\n            this.isLoading = false;\n            this.removeMessage(loadingMessage.id);\n            this.addMessage(response.response, false);\n          },\n          error: error => {\n            this.isLoading = false;\n            this.removeMessage(loadingMessage.id);\n            this.addMessage('Sorry, I encountered an error. Please try again.', false);\n            console.error('Chat error:', error);\n          }\n        });\n      }\n    }\n  }\n  addMessage(content, isUser, isLoading = false) {\n    const message = {\n      id: Date.now().toString(),\n      content,\n      isUser,\n      timestamp: new Date(),\n      isLoading\n    };\n    this.messages.push(message);\n    return message;\n  }\n  removeMessage(messageId) {\n    this.messages = this.messages.filter(m => m.id !== messageId);\n  }\n  scrollToBottom() {\n    if (this.chatContainer) {\n      this.chatContainer.nativeElement.scrollTop = this.chatContainer.nativeElement.scrollHeight;\n    }\n  }\n  formatMessage(content) {\n    // Simple formatting for line breaks and basic markdown\n    return content.replace(/\\n/g, '<br>').replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>').replace(/\\*(.*?)\\*/g, '<em>$1</em>');\n  }\n  goBack() {\n    this.router.navigate(['/dashboard']);\n  }\n};\n__decorate([ViewChild('chatContainer')], ChatComponent.prototype, \"chatContainer\", void 0);\nChatComponent = __decorate([Component({\n  selector: 'app-chat',\n  standalone: true,\n  imports: [CommonModule, ReactiveFormsModule],\n  template: `\n    <div class=\"min-h-screen bg-secondary-50\">\n      <!-- Navigation -->\n      <nav class=\"bg-white shadow-sm border-b border-secondary-200\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div class=\"flex justify-between h-16\">\n            <div class=\"flex items-center\">\n              <button (click)=\"goBack()\" class=\"mr-4 text-secondary-500 hover:text-secondary-700\">\n                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\"></path>\n                </svg>\n              </button>\n              <h1 class=\"text-xl font-bold text-primary-600\">CareerCompass AI Chat</h1>\n            </div>\n            <div class=\"flex items-center\">\n              <span class=\"text-sm text-secondary-600\">AI Career Assistant</span>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      <!-- Chat Container -->\n      <div class=\"max-w-4xl mx-auto h-[calc(100vh-64px)] flex flex-col\">\n        <!-- Chat Messages -->\n        <div class=\"flex-1 overflow-y-auto p-6\" #chatContainer>\n          <div *ngIf=\"messages.length === 0\" class=\"text-center text-secondary-500 mt-20\">\n            <div class=\"mb-4\">\n              <svg class=\"w-16 h-16 mx-auto text-primary-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"></path>\n              </svg>\n            </div>\n            <h3 class=\"text-lg font-medium text-secondary-900 mb-2\">Welcome to CareerCompass AI!</h3>\n            <p class=\"text-secondary-600\">Ask me anything about your career, skills development, or professional growth.</p>\n          </div>\n\n          <div *ngFor=\"let message of messages\" class=\"mb-4\">\n            <div [ngClass]=\"message.isUser ? 'flex justify-end' : 'flex justify-start'\">\n              <div [ngClass]=\"message.isUser ? 'bg-primary-600 text-white' : 'bg-white border border-secondary-200'\"\n                   class=\"max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow-sm\">\n                \n                <!-- Loading indicator for AI messages -->\n                <div *ngIf=\"message.isLoading\" class=\"flex items-center space-x-2\">\n                  <div class=\"spinner w-4 h-4\"></div>\n                  <span class=\"text-sm\">AI is thinking...</span>\n                </div>\n                \n                <!-- Message content -->\n                <div *ngIf=\"!message.isLoading\" class=\"text-sm\">\n                  <div [innerHTML]=\"formatMessage(message.content)\"></div>\n                  <div class=\"text-xs opacity-75 mt-1\">\n                    {{ message.timestamp | date:'h:mm a' }}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Chat Input -->\n        <div class=\"border-t border-secondary-200 bg-white p-4\">\n          <form [formGroup]=\"chatForm\" (ngSubmit)=\"sendMessage()\" class=\"flex space-x-4\">\n            <div class=\"flex-1\">\n              <input\n                type=\"text\"\n                formControlName=\"message\"\n                placeholder=\"Ask about career advice, skills, or professional development...\"\n                class=\"w-full px-4 py-2 border border-secondary-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n                (keydown.enter)=\"sendMessage()\"\n              />\n            </div>\n            <button\n              type=\"submit\"\n              [disabled]=\"chatForm.invalid || isLoading\"\n              class=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n            >\n              <span *ngIf=\"isLoading\" class=\"spinner mr-2\"></span>\n              <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"></path>\n              </svg>\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: []\n})], ChatComponent);\nexport { ChatComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}