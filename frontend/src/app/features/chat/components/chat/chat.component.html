<div class="chat-container">
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="gradient-orb orb-3"></div>
  </div>

  <!-- Navigation -->
  <nav class="chat-nav">
    <div class="nav-content">
      <div class="nav-left">
        <button (click)="goBack()" class="back-btn">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        <h1 class="nav-title">ðŸ§­ CareerCompass AI Chat</h1>
      </div>
      <div class="nav-right">
        <div class="ai-status">
          <span class="status-indicator"></span>
          <span class="status-text">AI Assistant Online</span>
        </div>
      </div>
    </div>
  </nav>

  <!-- Chat Messages Area -->
  <div class="chat-content">
    <div class="messages-container" #chatContainer>
      <!-- Welcome Message -->
      <div *ngIf="messages.length === 0" class="welcome-card">
        <div class="welcome-icon">
          <svg class="w-20 h-20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
            </path>
          </svg>
        </div>
        <h3>Welcome to CareerCompass AI!</h3>
        <p>I'm your personal AI career assistant. Ask me anything about:</p>
        <div class="suggestion-chips">
          <button class="chip" (click)="chatForm.patchValue({message: 'How can I improve my resume?'})">
            ðŸ“„ Resume Tips
          </button>
          <button class="chip" (click)="chatForm.patchValue({message: 'What skills should I learn for web development?'})">
            ðŸ’» Skill Development
          </button>
          <button class="chip" (click)="chatForm.patchValue({message: 'How do I prepare for technical interviews?'})">
            ðŸŽ¯ Interview Prep
          </button>
          <button class="chip" (click)="chatForm.patchValue({message: 'Career advice for software engineering'})">
            ðŸš€ Career Growth
          </button>
        </div>
      </div>

      <!-- Chat Messages -->
      <div *ngFor="let message of messages" class="message-wrapper" 
           [ngClass]="message.isUser ? 'message-user' : 'message-ai'">
        <div class="message-bubble" [ngClass]="message.isUser ? 'user-bubble' : 'ai-bubble'">
          <!-- Avatar -->
          <div class="message-avatar" *ngIf="!message.isUser">
            <span class="avatar-icon">ðŸ¤–</span>
          </div>

          <div class="message-content-wrapper">
            <!-- Loading indicator -->
            <div *ngIf="message.isLoading" class="loading-container">
              <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
              </div>
              <span class="loading-text">AI is thinking...</span>
            </div>

            <!-- Message content -->
            <div *ngIf="!message.isLoading" class="message-content">
              <div [innerHTML]="formatMessage(message.content)"></div>
              <div class="message-time">
                {{ message.timestamp | date:'h:mm a' }}
              </div>
            </div>
          </div>

          <!-- User Avatar -->
          <div class="message-avatar" *ngIf="message.isUser">
            <span class="avatar-icon">ðŸ‘¤</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Chat Input -->
    <div class="chat-input-container">
      <form [formGroup]="chatForm" (ngSubmit)="sendMessage()" class="chat-input-form">
        <div class="input-wrapper">
          <input
            type="text"
            formControlName="message"
            placeholder="Ask about career advice, skills, or professional development..."
            class="chat-input"
            (keydown.enter)="$event.preventDefault(); sendMessage()"
          />
        </div>
        <button
          type="submit"
          [disabled]="chatForm.invalid || isLoading"
          class="send-btn"
          [ngClass]="{'sending': isLoading}"
        >
          <span *ngIf="isLoading" class="spinner-icon"></span>
          <svg *ngIf="!isLoading" class="send-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8">
            </path>
          </svg>
        </button>
      </form>
    </div>
  </div>
</div>
