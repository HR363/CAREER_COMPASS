
<div class="min-h-screen bg-[#050505] text-white relative overflow-hidden selection:bg-indigo-500/30">
  
  <!-- Ambient Space Background -->
  <div class="fixed inset-0 z-0 pointer-events-none">
    <div class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-indigo-500/10 rounded-full blur-[120px] animate-blob"></div>
    <div class="absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-purple-500/10 rounded-full blur-[140px] animate-blob animation-delay-2000"></div>
  </div>

  <div class="chat-layout relative z-10 w-full">
    
    <!-- Top Bar -->
    <header class="p-4 md:p-6 flex items-center justify-between border-b border-white/5 bg-[#050505]/80 backdrop-blur-md sticky top-0 z-20">
      <div class="flex items-center gap-4">
        <button (click)="goBack()" class="w-10 h-10 rounded-full flex items-center justify-center bg-white/5 border border-white/10 hover:bg-white/10 transition-colors">
          <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        <div>
           <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-400 flex items-center gap-2">
             <span class="text-2xl">ðŸ¤–</span> AI Career Compass
           </h1>
           <p class="text-xs text-green-400 flex items-center gap-1.5 font-medium">
             <span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span> Online & Ready
           </p>
        </div>
      </div>
    </header>

    <!-- Chat Area -->
    <div class="chat-messages-area px-4 md:px-6" #chatContainer>
      
      <!-- Empty State -->
      <div *ngIf="messages.length === 0" class="welcome-container animate-fade-in">
         <div class="max-w-2xl w-full text-center space-y-8">
            <div class="w-24 h-24 mx-auto rounded-3xl bg-gradient-to-br from-indigo-500/20 to-purple-500/20 border border-indigo-500/30 flex items-center justify-center relative">
               <div class="absolute inset-0 bg-indigo-500/20 blur-xl"></div>
               <svg class="w-12 h-12 text-indigo-400 relative z-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
            </div>
            
            <div class="space-y-2">
              <h2 class="text-2xl md:text-3xl font-bold text-white">How can I help your career today?</h2>
              <p class="text-gray-400">Ask me about specific roles, skills to learn, resume tips, or market trends.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-3 max-w-lg mx-auto">
               <button class="suggestion-chip" (click)="chatForm.patchValue({message: 'How do I become a Machine Learning Engineer?'})">
                  <span class="text-lg">ðŸ¤–</span> ML Career Path
               </button>
               <button class="suggestion-chip" (click)="chatForm.patchValue({message: 'Review my resume for a Senior Dev role'})">
                  <span class="text-lg">ðŸ“„</span> Resume Review
               </button>
               <button class="suggestion-chip" (click)="chatForm.patchValue({message: 'What are the top skills for 2026?'})">
                  <span class="text-lg">ðŸ“ˆ</span> Market Trends
               </button>
               <button class="suggestion-chip" (click)="chatForm.patchValue({message: 'Prepare me for a behavioral interview'})">
                  <span class="text-lg">ðŸ’¼</span> Interview Prep
               </button>
            </div>
         </div>
      </div>

      <!-- Messages Loop -->
      <div *ngFor="let message of messages" class="message-row" [ngClass]="{ 'user': message.isUser, 'ai': !message.isUser }">
         <!-- AI Avatar -->
         <div *ngIf="!message.isUser" class="w-8 h-8 rounded-lg bg-indigo-600/20 flex items-center justify-center mr-3 mt-1 flex-shrink-0 border border-indigo-500/30">
            <span class="text-sm">ðŸ¤–</span>
         </div>

         <!-- Bubble -->
         <div class="message-bubble">
            <div *ngIf="message.isLoading" class="typing-dots">
               <span></span><span></span><span></span>
            </div>
            <div *ngIf="!message.isLoading" [innerHTML]="formatMessage(message.content)"></div>
            <div class="text-[10px] opacity-50 mt-2 text-right">
               {{ message.timestamp | date:'h:mm a' }}
            </div>
         </div>
      </div>

    </div>

    <!-- Input Area -->
    <div class="p-4 md:p-6 bg-[#050505] sticky bottom-0 z-20">
      <form [formGroup]="chatForm" (ngSubmit)="sendMessage()" class="input-area">
         <textarea 
            formControlName="message" 
            placeholder="Type your career question..."
            class="chat-input"
            rows="1"
            (keydown.enter)="$event.preventDefault(); sendMessage()">
         </textarea>
         
         <button type="submit" [disabled]="chatForm.invalid || isLoading" class="send-btn">
            <span *ngIf="isLoading" class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>
             <svg *ngIf="!isLoading" class="w-5 h-5 transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
               <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
             </svg>
         </button>
      </form>
    </div>

  </div>
</div>

